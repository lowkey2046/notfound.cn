---
layout: post
title:  "SonarQube 质量评价指标"
date:   2018-04-02 18:04:00 +0800
categories: sonar
---

== 项目总体描述

总体描述信息包括：质量阈(Quality Gate)，Bugs、漏洞、坏味道的评级和数量，覆盖率，代码重复率，代码行数，语言。

image::/images/2018/04/02/sonarqube-measures.png[]

质量阈(Quality Gate)包括正常(Passed)、警告(Warning)、错误(Failed) 三种。

== 项目指标(Measures)

项目指标主要包括如下几个部分：

* 可靠性(Reliability)
* 安全性(Security)
* 可维护性(Maintainability)
* 覆盖率(Coverage)
* 重复(Duplications)
* 大小(Size)
* 复杂度(Complexity)
* 问题(Issues)

=== 可靠性、安全性、可维护性

这三者都是由插件对源码进行分析所得的结果。

**可靠性(Reliability)** 与 Bugs 数量相关

image::/images/2018/04/02/sonarqube-measures-reliability.png[]

* Bugs: Bugs 总数、每个文件的 Bug 数量、Bug 的具体位置和详细描述信息
* 比率(Rating): 总的评分、每个文件的评分
* 修复工作(Remediation Effort): 总的修复时间、每个文件的修复时间

**安全性(Security)** 与 vulnerabilities(漏洞) 有关。

image::/images/2018/04/02/sonarqube-measures-security.png[]

* 漏洞(Vulnerabilities): 漏洞总数、每个文件的漏洞数量、漏洞的具体位置和详细描述信息
* 比率(Rating): 总的评分、每个文件的评分
* 修复工作(Remediation Effort): 总的修复时间、每个文件的修复时间

**可维护性(Maintainability)** 与 Code Smells(坏味道) 有关。

image::/images/2018/04/02/sonarqube-measures-maintainability.png[]

* 坏味道(Code Smells): 坏味道总数、每个文件的坏味道数量、坏味道的具体位置和详细描述信息
* 债(Debt):
* 债务率(Debt Ratio):
* 比率(Rating): 总的评分、每个文件的评分

三者信息展示方式类似，以 Code Smells(坏味道) 为例，查看每个文件的评级：

image::/images/2018/04/02/sonarqube-measures-maintainability-maintainability.png[]

查看代码具体的问题，以红圈白箭头标记：

image::/images/2018/04/02/sonarqube-measures-issues-issue.png[]

=== 覆盖率(Coverage)

测试覆盖率，包括新增代码(TODO)的测试覆盖率以及整个项目的测试覆盖率。

image::/images/2018/04/02/sonarqube-measures-coverage.png[]

查看单个文件时，测试未被覆盖的地方会左侧会标记为红色竖线。

image::/images/2018/04/02/sonarqube-measures-coverage-coverage.png[]

=== 重复(Duplications)

重复的代码，包括新增代码(TODO)的重复情况以及整个项目的代码重复情况。

image::/images/2018/04/02/sonarqube-measures-duplications.png[]

查看单个文件时，点击代码左侧的灰色竖条，可以查两个文件具体重复的内容。

image::/images/2018/04/02/sonarqube-measures-duplications-duplication.png[]

=== 大小(Size)

整个项目的代码行数、文件数、方法数等。

image::/images/2018/04/02/sonarqube-measures-size.png[]

=== 复杂度(Complexity)

应用的控制流是简单还是复杂。

image::/images/2018/04/02/sonarqube-measures-complexity.png[]

* https://blog.csdn.net/wangpeng198688/article/details/50434684[圈复杂度(Cyclomatic Complexity)] 可以计算出达到全面覆盖需要的最少测试用例。
* https://blog.sonarsource.com/cognitive-complexity-because-testability-understandability/[认知复杂度(Cognitive Complexity)] 对应这个应用是否很难被理解。

=== 问题(Issues)

分析代码时发现的问题，问题与可靠性、安全性、可维护性相关。

image::/images/2018/04/02/sonarqube-measures-issues.png[]

查看存在问题的代码位置、问题的详细描述信息；更改问题的类别、严重程度；打开、关闭、分配问题；对问题进行评论、添加标签等。

image::/images/2018/04/02/sonarqube-measures-issues-issue.png[]
